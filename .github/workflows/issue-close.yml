name: Auto Close Issues Based on Labels

on:
  issues:
    types: [labeled]

jobs:
  auto-close-issue:
    runs-on: ubuntu-latest
    steps:
      # å¤„ç† not_planned å…³é—­ç±»å‹
      - name: Close as not planned
        if: |
          contains('âŒ æ‹’ç»,ğŸ˜‚ ç§»äº¤ä¸Šæ¸¸,âŒ å¿½ç•¥,âŒ ç¬¬ä¸‰æ–¹,âŒ æš‚æ— è®¡åˆ’', github.event.label.name)
        env:
          GITHUB_TOKEN: ${{ secrets.BOT }}
        run: |
          gh api \
            --method PATCH \
            /repos/${{ github.repository }}/issues/${{ github.event.issue.number }} \
            -f state=closed \
            -f state_reason="not_planned"

      # å¤„ç† completed å…³é—­ç±»å‹
      - name: Close as completed
        if: github.event.label.name == 'ğŸ‘Œ å®Œæˆ'
        env:
          GITHUB_TOKEN: ${{ secrets.BOT }}
        run: |
          gh api \
            --method PATCH \
            /repos/${{ github.repository }}/issues/${{ github.event.issue.number }} \
            -f state=closed \
            -f state_reason="completed"